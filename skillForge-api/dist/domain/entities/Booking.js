"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Booking = exports.SessionType = exports.BookingStatus = void 0;
var BookingStatus;
(function (BookingStatus) {
    BookingStatus["PENDING"] = "pending";
    BookingStatus["CONFIRMED"] = "confirmed";
    BookingStatus["REJECTED"] = "rejected";
    BookingStatus["COMPLETED"] = "completed";
    BookingStatus["CANCELLED"] = "cancelled";
    BookingStatus["RESCHEDULE_REQUESTED"] = "reschedule_requested";
})(BookingStatus || (exports.BookingStatus = BookingStatus = {}));
var SessionType;
(function (SessionType) {
    SessionType["VIRTUAL"] = "Virtual";
    SessionType["IN_PERSON"] = "In-Person";
    SessionType["BOTH"] = "Both";
})(SessionType || (exports.SessionType = SessionType = {}));
class Booking {
    constructor(props) {
        this.props = props;
        this.validate();
    }
    static create(props) {
        return new Booking(props);
    }
    validate() {
        // Note: ID is optional during creation and will be generated by the repository
        if (!this.props.skillId) {
            throw new Error('Skill ID is required');
        }
        if (!this.props.providerId) {
            throw new Error('Provider ID is required');
        }
        if (!this.props.learnerId) {
            throw new Error('Learner ID is required');
        }
        if (this.props.sessionCost < 0) {
            throw new Error('Session cost cannot be negative');
        }
    }
    // Getters
    get id() {
        return this.props.id;
    }
    get skillId() {
        return this.props.skillId;
    }
    get skillTitle() {
        return this.props.skillTitle;
    }
    get providerId() {
        return this.props.providerId;
    }
    get providerName() {
        return this.props.providerName;
    }
    get providerAvatar() {
        return this.props.providerAvatar;
    }
    get learnerId() {
        return this.props.learnerId;
    }
    get learnerName() {
        return this.props.learnerName;
    }
    get learnerAvatar() {
        return this.props.learnerAvatar;
    }
    get preferredDate() {
        return this.props.preferredDate;
    }
    get preferredTime() {
        return this.props.preferredTime;
    }
    get duration() {
        return this.props.duration;
    }
    get sessionType() {
        return this.props.sessionType;
    }
    get message() {
        return this.props.message;
    }
    get notes() {
        return this.props.notes;
    }
    get status() {
        return this.props.status;
    }
    get sessionCost() {
        return this.props.sessionCost;
    }
    get rescheduleInfo() {
        return this.props.rescheduleInfo;
    }
    get rejectionReason() {
        return this.props.rejectionReason;
    }
    get createdAt() {
        return this.props.createdAt;
    }
    get updatedAt() {
        return this.props.updatedAt;
    }
    get startAt() {
        return this.props.startAt;
    }
    get endAt() {
        return this.props.endAt;
    }
    // Business Logic Methods
    canBeAccepted() {
        return this.props.status === BookingStatus.PENDING;
    }
    canBeRejected() {
        return this.props.status === BookingStatus.PENDING;
    }
    canBeCancelled() {
        return (this.props.status === BookingStatus.PENDING ||
            this.props.status === BookingStatus.CONFIRMED);
    }
    canBeRescheduled() {
        return (this.props.status === BookingStatus.CONFIRMED ||
            this.props.status === BookingStatus.PENDING);
    }
    canBeCompleted() {
        return this.props.status === BookingStatus.CONFIRMED;
    }
    isRescheduleRequest() {
        return this.props.status === BookingStatus.RESCHEDULE_REQUESTED;
    }
    isPending() {
        return this.props.status === BookingStatus.PENDING;
    }
    isConfirmed() {
        return this.props.status === BookingStatus.CONFIRMED;
    }
    isCompleted() {
        return this.props.status === BookingStatus.COMPLETED;
    }
    isCancelled() {
        return this.props.status === BookingStatus.CANCELLED;
    }
    // Convert to plain object for persistence
    toObject() {
        return { ...this.props };
    }
}
exports.Booking = Booking;
//# sourceMappingURL=Booking.js.map